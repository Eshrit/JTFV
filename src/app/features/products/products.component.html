<app-navbar></app-navbar>
<div class="content">
  <h2>Product Search</h2>

  <div class="search-section">
    <!-- Search By Dropdown -->
    <div class="form-group">
      <label for="searchBy">Search By</label>
      <select id="searchBy" [(ngModel)]="searchBy">
        <option value="name">Product Name</option>
        <option value="type">Type</option>
        <option value="priority">Priority</option>
        <option value="units">Units</option>
        <option value="mrp">MRP</option>
        <option value="expiryDays">Expiry Days</option>
      </select>
    </div>

    <!-- Search Input with Clear Icon -->
    <div class="form-group flex-grow input-group">
      <label for="searchText">Search</label>
      <div class="input-with-clear">
        <input
          id="searchText"
          type="text"
          placeholder="Enter search text"
          [(ngModel)]="searchText"
          (input)="onSearch()" />
        <span class="clear-icon" *ngIf="searchText" (click)="clearSearch()">Ã—</span>
      </div>
    </div>

    <!-- Buttons -->
    <div class="button-group">
      <button class="button" (click)="onSearch()">Search</button>
      <button class="button" (click)="backToHome()">Back To Home</button>
    </div>
  </div>

  <div class="product-count">
    Showing {{ filteredProducts.length }} of {{ products.length }} products
  </div>

  <div class="excel-table-container">
    <table class="excel-table">
      <thead>
        <tr>
          <th (click)="sortBy('name')">Product Name</th>
          <th (click)="sortBy('type')">Type</th>
          <th (click)="sortBy('priority')">Priority</th>
          <th (click)="sortBy('units')">Units</th>
          <th (click)="sortBy('mrp')">MRP</th>
          <th (click)="sortBy('expiryDays')">Expiry Days</th>
          <th>Edit</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let product of filteredProducts">
          <td>{{ product.name }}</td>
          <td>{{ product.type }}</td>
          <td>{{ product.priority }}</td>
          <td>{{ product.units }}</td>
          <td>{{ product.mrp || '-' }}</td>
          <td>{{ product.expiryDays || '-' }}</td>
          <td>
            <button class="action-button edit" (click)="onEdit(product.id)">Edit</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
